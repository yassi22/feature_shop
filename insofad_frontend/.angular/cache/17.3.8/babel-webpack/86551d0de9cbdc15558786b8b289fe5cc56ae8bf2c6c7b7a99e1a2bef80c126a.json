{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./topup.component.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./topup.component.scss?ngResource\";\nimport { Component } from '@angular/core';\nimport { NgIf } from \"@angular/common\";\nimport { AuthService } from \"../auth/auth.service\";\nimport { GiftCardService } from \"../services/giftcard.service\";\nimport { Router } from \"@angular/router\";\nimport { FormsModule } from \"@angular/forms\";\nimport { CartService } from \"../services/cart.service\";\nlet TopupComponent = class TopupComponent {\n  constructor(authService, giftCardService, router, cartService) {\n    this.authService = authService;\n    this.giftCardService = giftCardService;\n    this.router = router;\n    this.cartService = cartService;\n    this.giftCardToTopUp = null;\n    this.searchValue = \"\";\n    this.errorMessage = \"\";\n    this.successMessage = \"\";\n    this.topUpAmount = 0;\n  }\n  ngOnInit() {}\n  onSearch() {\n    this.errorMessage = \"\";\n    this.successMessage = \"\";\n    this.giftCardService.getGiftCardByCode(this.searchValue).subscribe(giftCard => {\n      if (!giftCard) {\n        this.errorMessage = \"Error searching for GiftCard.\";\n      }\n      this.giftCardToTopUp = giftCard;\n    }, err => {\n      this.errorMessage = \"Error searching for GiftCard.\";\n    });\n  }\n  onCancel() {\n    this.giftCardToTopUp = null;\n    this.topUpAmount = 0;\n    this.errorMessage = \"\";\n    this.searchValue = \"\";\n    this.successMessage = \"\";\n  }\n  onAddToBalance() {\n    if (!this.giftCardToTopUp) return;\n    const newTopUp = {\n      giftCardCode: this.giftCardToTopUp.code,\n      topUpAmount: this.topUpAmount\n    };\n    this.cartService.addTopUpToCart(newTopUp);\n    this.topUpAmount = 0;\n    this.errorMessage = \"\";\n    this.searchValue = \"\";\n    this.successMessage = \"Card top up successfully added to cart.\";\n    this.giftCardToTopUp = null;\n  }\n  static #_ = this.ctorParameters = () => [{\n    type: AuthService\n  }, {\n    type: GiftCardService\n  }, {\n    type: Router\n  }, {\n    type: CartService\n  }];\n};\nTopupComponent = __decorate([Component({\n  selector: 'app-topup',\n  standalone: true,\n  imports: [NgIf, FormsModule],\n  template: __NG_CLI_RESOURCE__0,\n  styles: [__NG_CLI_RESOURCE__1]\n})], TopupComponent);\nexport { TopupComponent };","map":{"version":3,"names":["Component","NgIf","AuthService","GiftCardService","Router","FormsModule","CartService","TopupComponent","constructor","authService","giftCardService","router","cartService","giftCardToTopUp","searchValue","errorMessage","successMessage","topUpAmount","ngOnInit","onSearch","getGiftCardByCode","subscribe","giftCard","err","onCancel","onAddToBalance","newTopUp","giftCardCode","code","addTopUpToCart","_","__decorate","selector","standalone","imports","template","__NG_CLI_RESOURCE__0"],"sources":["C:\\Users\\Ivan Kroetkov\\Desktop\\JavaProjects\\insofad_28\\insofad_frontend\\src\\app\\topup\\topup.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport {NgIf} from \"@angular/common\";\r\nimport {GiftCard} from \"../models/giftcard.model\";\r\nimport {AuthService} from \"../auth/auth.service\";\r\nimport {GiftCardService} from \"../services/giftcard.service\";\r\nimport {Router} from \"@angular/router\";\r\nimport {FormsModule} from \"@angular/forms\";\r\nimport {CartService} from \"../services/cart.service\";\r\nimport {Topup} from \"../models/topup.model\";\r\n\r\n@Component({\r\n  selector: 'app-topup',\r\n  standalone: true,\r\n  imports: [\r\n    NgIf,\r\n    FormsModule\r\n  ],\r\n  templateUrl: './topup.component.html',\r\n  styleUrl: './topup.component.scss'\r\n})\r\nexport class TopupComponent {\r\n\r\n  giftCardToTopUp: GiftCard | null = null\r\n  searchValue: string = \"\";\r\n  errorMessage: string = \"\";\r\n  successMessage: string = \"\";\r\n  topUpAmount: number = 0;\r\n\r\n  constructor(private authService: AuthService, private giftCardService: GiftCardService, private router: Router,\r\n              private cartService: CartService) {\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n\r\n  }\r\n\r\n  public onSearch()\r\n  {\r\n    this.errorMessage = \"\";\r\n    this.successMessage = \"\";\r\n\r\n    this.giftCardService.getGiftCardByCode(this.searchValue)\r\n        .subscribe((giftCard: GiftCard) => {\r\n          if (!giftCard)\r\n          {\r\n            this.errorMessage = \"Error searching for GiftCard.\";\r\n          }\r\n          this.giftCardToTopUp = giftCard;\r\n        },\r\n            (err) =>{\r\n              this.errorMessage = \"Error searching for GiftCard.\";\r\n            });\r\n  }\r\n\r\n  public onCancel()\r\n  {\r\n    this.giftCardToTopUp = null;\r\n    this.topUpAmount = 0;\r\n    this.errorMessage = \"\";\r\n    this.searchValue = \"\";\r\n    this.successMessage = \"\";\r\n\r\n  }\r\n\r\n  public onAddToBalance()\r\n  {\r\n    if (!this.giftCardToTopUp) return;\r\n    const newTopUp: Topup = {\r\n        giftCardCode: this.giftCardToTopUp.code,\r\n        topUpAmount: this.topUpAmount\r\n\r\n    }\r\n    this.cartService.addTopUpToCart(newTopUp);\r\n      this.topUpAmount = 0;\r\n      this.errorMessage = \"\";\r\n      this.searchValue = \"\";\r\n      this.successMessage = \"Card top up successfully added to cart.\"\r\n      this.giftCardToTopUp = null;\r\n\r\n\r\n  }\r\n\r\n\r\n\r\n}\r\n"],"mappings":";;;AAAA,SAASA,SAAS,QAAQ,eAAe;AACzC,SAAQC,IAAI,QAAO,iBAAiB;AAEpC,SAAQC,WAAW,QAAO,sBAAsB;AAChD,SAAQC,eAAe,QAAO,8BAA8B;AAC5D,SAAQC,MAAM,QAAO,iBAAiB;AACtC,SAAQC,WAAW,QAAO,gBAAgB;AAC1C,SAAQC,WAAW,QAAO,0BAA0B;AAa7C,IAAMC,cAAc,GAApB,MAAMA,cAAc;EAQzBC,YAAoBC,WAAwB,EAAUC,eAAgC,EAAUC,MAAc,EAC1FC,WAAwB;IADxB,KAAAH,WAAW,GAAXA,WAAW;IAAuB,KAAAC,eAAe,GAAfA,eAAe;IAA2B,KAAAC,MAAM,GAANA,MAAM;IAClF,KAAAC,WAAW,GAAXA,WAAW;IAP/B,KAAAC,eAAe,GAAoB,IAAI;IACvC,KAAAC,WAAW,GAAW,EAAE;IACxB,KAAAC,YAAY,GAAW,EAAE;IACzB,KAAAC,cAAc,GAAW,EAAE;IAC3B,KAAAC,WAAW,GAAW,CAAC;EAIvB;EAEAC,QAAQA,CAAA,GAGR;EAEOC,QAAQA,CAAA;IAEb,IAAI,CAACJ,YAAY,GAAG,EAAE;IACtB,IAAI,CAACC,cAAc,GAAG,EAAE;IAExB,IAAI,CAACN,eAAe,CAACU,iBAAiB,CAAC,IAAI,CAACN,WAAW,CAAC,CACnDO,SAAS,CAAEC,QAAkB,IAAI;MAChC,IAAI,CAACA,QAAQ,EACb;QACE,IAAI,CAACP,YAAY,GAAG,+BAA+B;MACrD;MACA,IAAI,CAACF,eAAe,GAAGS,QAAQ;IACjC,CAAC,EACIC,GAAG,IAAI;MACN,IAAI,CAACR,YAAY,GAAG,+BAA+B;IACrD,CAAC,CAAC;EACZ;EAEOS,QAAQA,CAAA;IAEb,IAAI,CAACX,eAAe,GAAG,IAAI;IAC3B,IAAI,CAACI,WAAW,GAAG,CAAC;IACpB,IAAI,CAACF,YAAY,GAAG,EAAE;IACtB,IAAI,CAACD,WAAW,GAAG,EAAE;IACrB,IAAI,CAACE,cAAc,GAAG,EAAE;EAE1B;EAEOS,cAAcA,CAAA;IAEnB,IAAI,CAAC,IAAI,CAACZ,eAAe,EAAE;IAC3B,MAAMa,QAAQ,GAAU;MACpBC,YAAY,EAAE,IAAI,CAACd,eAAe,CAACe,IAAI;MACvCX,WAAW,EAAE,IAAI,CAACA;KAErB;IACD,IAAI,CAACL,WAAW,CAACiB,cAAc,CAACH,QAAQ,CAAC;IACvC,IAAI,CAACT,WAAW,GAAG,CAAC;IACpB,IAAI,CAACF,YAAY,GAAG,EAAE;IACtB,IAAI,CAACD,WAAW,GAAG,EAAE;IACrB,IAAI,CAACE,cAAc,GAAG,yCAAyC;IAC/D,IAAI,CAACH,eAAe,GAAG,IAAI;EAG/B;EAAC,QAAAiB,CAAA,G;;;;;;;;;;AA7DUvB,cAAc,GAAAwB,UAAA,EAV1B/B,SAAS,CAAC;EACTgC,QAAQ,EAAE,WAAW;EACrBC,UAAU,EAAE,IAAI;EAChBC,OAAO,EAAE,CACPjC,IAAI,EACJI,WAAW,CACZ;EACD8B,QAAA,EAAAC,oBAAqC;;CAEtC,CAAC,C,EACW7B,cAAc,CAiE1B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}