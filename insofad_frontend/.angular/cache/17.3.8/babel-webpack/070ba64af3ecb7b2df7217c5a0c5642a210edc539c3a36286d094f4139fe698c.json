{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./promo-codes.component.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./promo-codes.component.scss?ngResource\";\nimport { Component } from '@angular/core';\nimport { PromoCodeService } from '../services/promo-code.service';\nimport { CommonModule, DatePipe, NgForOf } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nlet PromoCodesComponent = class PromoCodesComponent {\n  constructor(promoCodeService) {\n    this.promoCodeService = promoCodeService;\n    this.activePromoCodes = [];\n    this.inactivePromoCodes = [];\n    this.promoCodeType = '';\n    this.Date = Date;\n  }\n  ngOnInit() {\n    this.loadActivePromoCodes();\n    this.loadInactivePromoCodes();\n  }\n  loadActivePromoCodes() {\n    this.promoCodeService.ActivePromoCodesObservable.subscribe(promoCodes => {\n      this.activePromoCodes = promoCodes;\n      console.log(promoCodes);\n    });\n  }\n  loadInactivePromoCodes() {\n    this.promoCodeService.InactivePromoCodesObservable.subscribe(promoCodes => {\n      this.inactivePromoCodes = promoCodes;\n    });\n  }\n  onCreatePromoCode(code, discount, minimumAmount, expiryString) {\n    const expiryDate = new Date(expiryString);\n    if (this.promoCodeType === 'percentage') {\n      if (!(discount > 0 && discount <= 100)) {\n        console.error('Invalid percentage discount');\n        alert('Invalid percentage discount');\n        return;\n      }\n    }\n    this.promoCodeService.createPromoCode(code, discount, this.promoCodeType, minimumAmount || 0, expiryDate).subscribe({\n      next: response => {\n        console.log(response);\n        this.loadActivePromoCodes();\n        this.loadInactivePromoCodes();\n      },\n      error: error => {\n        console.error('promo code creation failed', error);\n      }\n    });\n  }\n  onDeletePromoCode(code) {\n    this.promoCodeService.deletePromoCode(code).subscribe({\n      next: response => {\n        console.log(response);\n        this.loadActivePromoCodes();\n        this.loadInactivePromoCodes();\n      },\n      error: error => {\n        console.error('promo code deletion failed', error);\n      }\n    });\n  }\n  static #_ = this.ctorParameters = () => [{\n    type: PromoCodeService\n  }];\n};\nPromoCodesComponent = __decorate([Component({\n  selector: 'app-promo-codes',\n  standalone: true,\n  imports: [DatePipe, NgForOf, FormsModule, CommonModule],\n  template: __NG_CLI_RESOURCE__0,\n  styles: [__NG_CLI_RESOURCE__1]\n})], PromoCodesComponent);\nexport { PromoCodesComponent };","map":{"version":3,"names":["Component","PromoCodeService","CommonModule","DatePipe","NgForOf","FormsModule","PromoCodesComponent","constructor","promoCodeService","activePromoCodes","inactivePromoCodes","promoCodeType","Date","ngOnInit","loadActivePromoCodes","loadInactivePromoCodes","ActivePromoCodesObservable","subscribe","promoCodes","console","log","InactivePromoCodesObservable","onCreatePromoCode","code","discount","minimumAmount","expiryString","expiryDate","error","alert","createPromoCode","next","response","onDeletePromoCode","deletePromoCode","_","__decorate","selector","standalone","imports","template","__NG_CLI_RESOURCE__0"],"sources":["C:\\Users\\Ivan Kroetkov\\Desktop\\JavaProjects\\insofad_28\\insofad_frontend\\src\\app\\promo-codes\\promo-codes.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { PromoCodeService } from '../services/promo-code.service';\r\nimport { PromoCode } from '../models/promo-code.model';\r\nimport {CommonModule, DatePipe, NgForOf} from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\n@Component({\r\n    selector: 'app-promo-codes',\r\n    standalone: true,\r\n    imports: [\r\n        DatePipe,\r\n        NgForOf,\r\n        FormsModule,\r\n        CommonModule\r\n    ],\r\n    templateUrl: './promo-codes.component.html',\r\n    styleUrls: ['./promo-codes.component.scss']\r\n})\r\nexport class PromoCodesComponent implements OnInit {\r\n\r\n    activePromoCodes: PromoCode[] = [];\r\n    inactivePromoCodes: PromoCode[] = [];\r\n\r\n    promoCodeType: string = '';\r\n\r\n    constructor(private promoCodeService: PromoCodeService) {}\r\n\r\n    ngOnInit() {\r\n        this.loadActivePromoCodes();\r\n        this.loadInactivePromoCodes();\r\n    }\r\n\r\n    private loadActivePromoCodes() {\r\n        this.promoCodeService.ActivePromoCodesObservable.subscribe(promoCodes => {\r\n            this.activePromoCodes = promoCodes;\r\n            console.log(promoCodes);\r\n        });\r\n    }\r\n\r\n    private loadInactivePromoCodes() {\r\n        this.promoCodeService.InactivePromoCodesObservable.subscribe(promoCodes => {\r\n            this.inactivePromoCodes = promoCodes;\r\n        });\r\n    }\r\n\r\n    public onCreatePromoCode(code: string, discount: number, minimumAmount : number, expiryString: string) {\r\n        const expiryDate = new Date(expiryString);\r\n        if(this.promoCodeType === 'percentage') {\r\n            if(!(discount > 0 && discount <= 100)) {\r\n                console.error('Invalid percentage discount')\r\n                alert('Invalid percentage discount')\r\n                return;\r\n            }\r\n        }\r\n        this.promoCodeService.createPromoCode(code, discount, this.promoCodeType, minimumAmount || 0, expiryDate).subscribe({\r\n            next: (response) => {\r\n                console.log(response);\r\n                this.loadActivePromoCodes();\r\n                this.loadInactivePromoCodes();\r\n            },\r\n            error: (error) => {\r\n                console.error('promo code creation failed', error);\r\n            }\r\n        });\r\n    }\r\n\r\n    onDeletePromoCode(code: string) {\r\n        this.promoCodeService.deletePromoCode(code).subscribe({\r\n            next: (response) => {\r\n                console.log(response);\r\n                this.loadActivePromoCodes();\r\n                this.loadInactivePromoCodes();\r\n            },\r\n            error: (error) => {\r\n                console.error('promo code deletion failed', error);\r\n            }\r\n        });\r\n    }\r\n\r\n    protected readonly Date = Date;\r\n}\r\n"],"mappings":";;;AAAA,SAASA,SAAS,QAAgB,eAAe;AACjD,SAASC,gBAAgB,QAAQ,gCAAgC;AAEjE,SAAQC,YAAY,EAAEC,QAAQ,EAAEC,OAAO,QAAO,iBAAiB;AAC/D,SAASC,WAAW,QAAQ,gBAAgB;AAcrC,IAAMC,mBAAmB,GAAzB,MAAMA,mBAAmB;EAO5BC,YAAoBC,gBAAkC;IAAlC,KAAAA,gBAAgB,GAAhBA,gBAAgB;IALpC,KAAAC,gBAAgB,GAAgB,EAAE;IAClC,KAAAC,kBAAkB,GAAgB,EAAE;IAEpC,KAAAC,aAAa,GAAW,EAAE;IAwDP,KAAAC,IAAI,GAAGA,IAAI;EAtD2B;EAEzDC,QAAQA,CAAA;IACJ,IAAI,CAACC,oBAAoB,EAAE;IAC3B,IAAI,CAACC,sBAAsB,EAAE;EACjC;EAEQD,oBAAoBA,CAAA;IACxB,IAAI,CAACN,gBAAgB,CAACQ,0BAA0B,CAACC,SAAS,CAACC,UAAU,IAAG;MACpE,IAAI,CAACT,gBAAgB,GAAGS,UAAU;MAClCC,OAAO,CAACC,GAAG,CAACF,UAAU,CAAC;IAC3B,CAAC,CAAC;EACN;EAEQH,sBAAsBA,CAAA;IAC1B,IAAI,CAACP,gBAAgB,CAACa,4BAA4B,CAACJ,SAAS,CAACC,UAAU,IAAG;MACtE,IAAI,CAACR,kBAAkB,GAAGQ,UAAU;IACxC,CAAC,CAAC;EACN;EAEOI,iBAAiBA,CAACC,IAAY,EAAEC,QAAgB,EAAEC,aAAsB,EAAEC,YAAoB;IACjG,MAAMC,UAAU,GAAG,IAAIf,IAAI,CAACc,YAAY,CAAC;IACzC,IAAG,IAAI,CAACf,aAAa,KAAK,YAAY,EAAE;MACpC,IAAG,EAAEa,QAAQ,GAAG,CAAC,IAAIA,QAAQ,IAAI,GAAG,CAAC,EAAE;QACnCL,OAAO,CAACS,KAAK,CAAC,6BAA6B,CAAC;QAC5CC,KAAK,CAAC,6BAA6B,CAAC;QACpC;MACJ;IACJ;IACA,IAAI,CAACrB,gBAAgB,CAACsB,eAAe,CAACP,IAAI,EAAEC,QAAQ,EAAE,IAAI,CAACb,aAAa,EAAEc,aAAa,IAAI,CAAC,EAAEE,UAAU,CAAC,CAACV,SAAS,CAAC;MAChHc,IAAI,EAAGC,QAAQ,IAAI;QACfb,OAAO,CAACC,GAAG,CAACY,QAAQ,CAAC;QACrB,IAAI,CAAClB,oBAAoB,EAAE;QAC3B,IAAI,CAACC,sBAAsB,EAAE;MACjC,CAAC;MACDa,KAAK,EAAGA,KAAK,IAAI;QACbT,OAAO,CAACS,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;MACtD;KACH,CAAC;EACN;EAEAK,iBAAiBA,CAACV,IAAY;IAC1B,IAAI,CAACf,gBAAgB,CAAC0B,eAAe,CAACX,IAAI,CAAC,CAACN,SAAS,CAAC;MAClDc,IAAI,EAAGC,QAAQ,IAAI;QACfb,OAAO,CAACC,GAAG,CAACY,QAAQ,CAAC;QACrB,IAAI,CAAClB,oBAAoB,EAAE;QAC3B,IAAI,CAACC,sBAAsB,EAAE;MACjC,CAAC;MACDa,KAAK,EAAGA,KAAK,IAAI;QACbT,OAAO,CAACS,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;MACtD;KACH,CAAC;EACN;EAAC,QAAAO,CAAA,G;;;;AA3DQ7B,mBAAmB,GAAA8B,UAAA,EAZ/BpC,SAAS,CAAC;EACPqC,QAAQ,EAAE,iBAAiB;EAC3BC,UAAU,EAAE,IAAI;EAChBC,OAAO,EAAE,CACLpC,QAAQ,EACRC,OAAO,EACPC,WAAW,EACXH,YAAY,CACf;EACDsC,QAAA,EAAAC,oBAA2C;;CAE9C,CAAC,C,EACWnC,mBAAmB,CA8D/B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}